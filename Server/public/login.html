<!DOCTYPE html>
<html>
<head>
<title>Login - 3030.link</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js" defer type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<div id = "login-page" class="main-content">
    <h2>Login</h2>
<form>
    <div class="form-group">
        <label for = "username">Username</label>
        <input type="text" class="form-control" id="username">
    </div>
    <div class="form-group">
        <label for = "password">Password</label>
        <input type="password" class="form-control" id="password">
    </div>
    <button id = "login-submit" type="submit" class="btn btn-primary">Login</button>
    <p>Don't have a 3030.link account? <a href="/signup">Join now</a>.</p>
  </form>
</div>


  <script>
      function login(e) {
          e.preventDefault()
          const username = $("#username"). val()
          const password = $("#password"). val()
          $.ajax({
              type:"POST",
              url:'auth',
              data: {user: {username: username, password: password}},
              success: function(response){
                  //console.log(response)
                  if(response == "success") {
                    window.location.replace("/");
                  }
                  else if (response == "The Username doesn't exist!") {
                      alert("The Username doesn't exist!")
                  }
                  else {
                    alert("The Username and Password doesn't match!")
                  }
                }
            });
      }
      document.getElementById("login-submit").addEventListener("click", e => login(e))
  </script>
</html>